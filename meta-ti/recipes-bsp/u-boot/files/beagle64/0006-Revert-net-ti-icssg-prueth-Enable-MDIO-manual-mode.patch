From 1be68b15ea25673bceeeff3f4a562685b23b5d8e Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Fri, 21 Oct 2022 17:32:21 -0500
Subject: [PATCH 06/15] Revert "net: ti: icssg-prueth: Enable MDIO manual mode"

This reverts commit 98726e3f84a8bd3b70efdc7ad72f29d099f6831f.

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/net/ti/icssg_prueth.c | 20 +-------------------
 drivers/net/ti/icssg_prueth.h |  1 -
 2 files changed, 1 insertion(+), 20 deletions(-)

diff --git a/drivers/net/ti/icssg_prueth.c b/drivers/net/ti/icssg_prueth.c
index 3f283831a6..965f9353a3 100644
--- a/drivers/net/ti/icssg_prueth.c
+++ b/drivers/net/ti/icssg_prueth.c
@@ -113,7 +113,7 @@ static int icssg_mdio_init(struct udevice *dev)
 	prueth->bus = cpsw_mdio_init(dev->name, prueth->mdio_base,
 				     prueth->mdio_freq,
 				     clk_get_rate(&prueth->mdiofck),
-				     prueth->mdio_manual_mode);
+				     false);
 	if (!prueth->bus)
 		return -EFAULT;
 
@@ -487,20 +487,6 @@ static int prueth_config_rgmiidelay(struct prueth *prueth,
 	return 0;
 }
 
-static const struct soc_attr k3_mdio_soc_data[] = {
-	{ .family = "AM62X", .revision = "SR1.0" },
-	{ .family = "AM64X", .revision = "SR1.0" },
-	{ .family = "AM64X", .revision = "SR2.0" },
-	{ .family = "AM65X", .revision = "SR1.0" },
-	{ .family = "AM65X", .revision = "SR2.0" },
-	{ .family = "J7200", .revision = "SR1.0" },
-	{ .family = "J7200", .revision = "SR2.0" },
-	{ .family = "J721E", .revision = "SR1.0" },
-	{ .family = "J721E", .revision = "SR1.1" },
-	{ .family = "J721S2", .revision = "SR1.0" },
-	{ /* sentinel */ },
-};
-
 static int prueth_probe(struct udevice *dev)
 {
 	struct prueth *prueth;
@@ -639,10 +625,6 @@ static int prueth_probe(struct udevice *dev)
 		return ret;
 	}
 
-	prueth->mdio_manual_mode = false;
-	if (soc_device_match(k3_mdio_soc_data))
-		prueth->mdio_manual_mode = true;
-
 	ret = icssg_mdio_init(dev);
 	if (ret)
 		return ret;
diff --git a/drivers/net/ti/icssg_prueth.h b/drivers/net/ti/icssg_prueth.h
index 1698dafc00..2a5b2241f9 100644
--- a/drivers/net/ti/icssg_prueth.h
+++ b/drivers/net/ti/icssg_prueth.h
@@ -65,7 +65,6 @@ struct prueth {
 	u32			rx_pend;
 	int			slice;
 	bool			is_sr1;
-	bool			mdio_manual_mode;
 };
 
 /* config helpers */
-- 
2.43.0

